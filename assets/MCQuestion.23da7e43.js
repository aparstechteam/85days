var w=Object.defineProperty,C=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var f=(r,s,o)=>s in r?w(r,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[s]=o,b=(r,s)=>{for(var o in s||(s={}))M.call(s,o)&&f(r,o,s[o]);if(x)for(var o of x(s))L.call(s,o)&&f(r,o,s[o]);return r},y=(r,s)=>C(r,T(s));import{L as S,r as H,o as i,b as l,a as n,z as g,A as d,c as D,w as R,d as I,D as k,G as v,H as m,I as N,J as A,K as V}from"./vendor.0aa590d9.js";import{_ as j,r as Y}from"./index.151c31f6.js";const B={data(){return{timing:null,solutionv:!1,retake:!1,questions:[],solution:[],result:[],unknown:!1,loading:!0,eload:!1,minute:0,second:0,end:Date.now()+12e6,show:!1,url:"",solutionpdf:"",starttime:Date.now(),ended:null,inttime:109090,immediate:!1}},beforeRouteEnter(r,s,o){var t;if((t=JSON.parse(localStorage.getItem("rb85")))==null?void 0:t.roll){o();return}o({path:"/login"})},methods:{endalert(){this.$swal({icon:"warning",title:"Will be available after the time ends"})},getQuestionLink(){this.loading=!0;let r=null;fetch(`${Y}${this.$route.params.id}`).then(s=>s.json()).then(s=>{if(new Date(s.exam.start).getTime()>Date.now()){this.$router.push("/");return}this.url="https://script.google.com/macros/s/AKfycbxOl3ns-6BSjrGvC79DRoyhKf9ggHQask_dlVR7GhgJDv7YT5kr9XzV_hfcf-d_b_21Aw/exec?sheet="+s.exam.exam,this.ended=new Date(s.exam.end).getTime(),this.timelimit=s.exam.timelimit*6e4,this.immediate=!s.exam.special,this.solutionpdf=s.exam.solve_sheet,r=s.exam.time;let o=JSON.parse(localStorage.getItem("rb85")).roll;fetch(this.url+"&type=check&phone="+o).then(c=>c.json()).then(c=>{c.message=="exists"||this.ended<Date.now()?(this.result=c.result?c.result:["","Times up"],fetch(this.url+"&type=question").then(t=>t.json()).then(t=>{this.solution=t;let a=r;this.inttime=a*6e4,this.end=a*6e4}),this.loading=!1):(this.unknown=!0,fetch(this.url+"&type=question").then(t=>t.json()).then(t=>{this.questions=t.map(u=>y(b({},u),{selected:""}));let a=r;this.inttime=a*6e4,this.end=a*6e4,this.loading=!1,this.showRemaining(this.end+Date.now()),this.autoSubmit()}))})})},startRetake(){this.retake=!0,this.showRemaining(Date.now()+this.end)},retakeResult(){let r=this.solution.reduce((s,o)=>(o.correct==o.selected?s+=Number(o.marks)||1:o.selected&&(s-=.25),s),0);this.$swal({icon:"success",title:"Success",text:`You Scored ${r}`}).then(()=>{this.retake=!1,this.show=!1,clearTimeout(this.timing),this.solution=this.solution.map(s=>y(b({},s),{selected:""}))})},submitAns(){let r=Date.now()-this.starttime;if(this.timelimit<r){this.eload=!0;let s=this.questions.reduce((a,u)=>(u.correct==u.selected?a+=Number(u.marks)||1:u.selected&&(a-=.25),a),0);clearTimeout(this.timing);let{roll:o,name:c,college:t}=JSON.parse(localStorage.getItem("rb85"));fetch(this.url,{method:"POST",mode:"no-cors",cache:"no-cache",redirect:"follow",body:JSON.stringify({ttrx:o,name:c,attempt:1,score:s,college:t,duration:r})}).then(()=>{clearTimeout(this.timing),this.$swal({icon:"success",title:"Success",text:`You Scored ${s}`}).then(()=>{this.$router.replace(`/ranking/${this.$route.params.id}`)})})}else this.$swal({icon:"warning",title:"Wait",text:`You can't submit before ${this.timelimit/6e4} minutes`})},autoSubmit(){this.timing=setTimeout(()=>{this.show=!1,this.submitAns()},this.inttime)},showRemaining(r){this.show=!0;const s=setInterval(()=>{const o=r-Date.now();if(o<0){clearInterval(s);return}const c=Math.floor(o/this._days),t=Math.floor(o%this._days/this._hours),a=Math.floor(o%this._hours/this._minutes),u=Math.floor(o%this._minutes/this._seconds);this.second=u<10?"0"+u:u,this.minute=a<10?"0"+a:a,this.hours=t<10?"0"+t:t,this.days=c<10?"0"+c:c},1e3)}},created(){this.getQuestionLink(),window.scrollTo(0,0)},computed:y(b({},S(["user"])),{_seconds:()=>1e3,_minutes(){return this._seconds*60},_hours(){return this._minutes*60},_days(){return this._hours*24}})},p=r=>(N("data-v-8abbe37a"),r=r(),A(),r),J={key:0},O={key:0,class:"py-5 mx-auto mt-5 rounded bg-gray-50 md:w-2/3"},Q={class:"py-3 text-center"},z={key:0,class:"my-4 text-2xl font-bold text-gray-900 ma-auto"},E={class:"py-5"},G=V("View Solution"),K=["textContent"],W={key:0,class:"my-5 text-center"},F={key:1,class:"text-center"},P=["textContent"],X={key:2,class:"my-4 font-semibold text-center text-gray-900"},U={key:1,class:"pb-10"},Z={class:"py-4 text-center"},$={class:"text-2xl font-bold text-gray-900"},q=p(()=>n("p",{class:"text-center"}," \u09AA\u09CD\u09B0\u09A4\u09BF\u099F\u09BF \u09AA\u09CD\u09B0\u09B6\u09CD\u09A8\u09C7\u09B0 \u0995\u09CD\u09B7\u09C7\u09A4\u09CD\u09B0\u09C7 \u09A4\u09C1\u09AE\u09BF \u0995\u09C7\u09AC\u09B2 \u098F\u0995\u09AC\u09BE\u09B0 \u0989\u09A4\u09CD\u09A4\u09B0 \u0995\u09B0\u09BE\u09B0 \u09B8\u09C1\u09AF\u09CB\u0997 \u09AA\u09BE\u09AC\u09C7\u0964 \u098F\u0995\u09AC\u09BE\u09B0 \u0989\u09A4\u09CD\u09A4\u09B0 \u09B8\u09BF\u09B2\u09C7\u0995\u09CD\u099F \u0995\u09B0\u09BE\u09B0 \u09AA\u09B0 \u09A4\u09BE \u09AA\u09B0\u09BF\u09AC\u09B0\u09CD\u09A4\u09A8 \u0995\u09B0\u09BE\u09B0 \u0995\u09CB\u09A8\u09CB \u09B8\u09C1\u09AF\u09CB\u0997 \u09A8\u09BE\u0987\u0964 ",-1)),ee={class:"mx-2 text-gray-900 md:w-2/3 md:mx-auto"},te={class:"text-right"},se={class:"badge badge-primary"},oe=["innerHTML"],ne={class:"mt-3"},re=["innerHTML","onClick"],ie=["innerHTML","onClick"],le=["innerHTML","onClick"],ae=["innerHTML","onClick"],de={class:"mb-10 text-center"},ce={key:2,class:"pb-10"},ue={class:"py-4 text-center"},he={class:"text-2xl font-bold text-gray-900"},me=p(()=>n("p",{class:"text-center"}," \u09AA\u09CD\u09B0\u09A4\u09BF\u099F\u09BF \u09AA\u09CD\u09B0\u09B6\u09CD\u09A8\u09C7\u09B0 \u0995\u09CD\u09B7\u09C7\u09A4\u09CD\u09B0\u09C7 \u09A4\u09C1\u09AE\u09BF \u0995\u09C7\u09AC\u09B2 \u098F\u0995\u09AC\u09BE\u09B0 \u0989\u09A4\u09CD\u09A4\u09B0 \u0995\u09B0\u09BE\u09B0 \u09B8\u09C1\u09AF\u09CB\u0997 \u09AA\u09BE\u09AC\u09C7\u0964 \u098F\u0995\u09AC\u09BE\u09B0 \u0989\u09A4\u09CD\u09A4\u09B0 \u09B8\u09BF\u09B2\u09C7\u0995\u09CD\u099F \u0995\u09B0\u09BE\u09B0 \u09AA\u09B0 \u09A4\u09BE \u09AA\u09B0\u09BF\u09AC\u09B0\u09CD\u09A4\u09A8 \u0995\u09B0\u09BE\u09B0 \u0995\u09CB\u09A8\u09CB \u09B8\u09C1\u09AF\u09CB\u0997 \u09A8\u09BE\u0987\u0964 ",-1)),ge={class:"mx-2 md:w-2/3 md:mx-auto"},_e={class:"text-right"},be={class:"badge badge-primary"},ye=["innerHTML"],pe={class:"mt-3"},xe=["innerHTML","onClick"],fe=["innerHTML","onClick"],ke=["innerHTML","onClick"],ve=["innerHTML","onClick"],we={class:"mb-10 text-center"},Ce=["disabled"],Te={key:3,class:"white--text fixed__timer"},Me={class:"text-white bg-blue-500 border border-white shadow"},Le={key:1,class:"flex items-center justify-center w-full h-screen"},Se=p(()=>n("div",{class:"flex items-center justify-center -mt-24 space-x-1 text-sm text-gray-700"},[n("svg",{fill:"none",class:"w-10 h-10 animate-spin",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"clip-rule":"evenodd",d:"M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z",fill:"currentColor","fill-rule":"evenodd"})]),n("div",{class:"text-lg"},"Loading ...")],-1)),He=[Se];function De(r,s,o,c,t,a){const u=H("router-link");return t.loading?(i(),l("div",Le,He)):(i(),l("div",J,[!t.unknown&&!t.loading&&!t.retake?(i(),l("div",O,[n("div",Q,[t.result[1]?(i(),l("h2",z,"You Scored: "+g(t.result[1]),1)):d("",!0),n("div",E,[this.ended<Date.now()||t.immediate?(i(),D(u,{key:0,to:`/solution/${this.$route.params.id}`,class:"my-2 btn btn-primary"},{default:R(()=>[G]),_:1},8,["to"])):(i(),l("button",{key:1,class:"btn btn-primary",onClick:s[0]||(s[0]=(...e)=>a.endalert&&a.endalert(...e)),textContent:g("View Solution")},null,8,K))])]),!t.retake&&t.solution.length>0?(i(),l("div",W,[I(u,{to:`/ranking/${this.$route.params.id}`,class:"mx-auto my-2 btn btn-primary",text:"View Your Rank"},null,8,["to"])])):d("",!0),!t.retake&&t.solution.length>0?(i(),l("div",F,[n("button",{class:"mx-auto btn btn-primary",onClick:s[1]||(s[1]=(...e)=>a.startRetake&&a.startRetake(...e)),textContent:g("Test Yourself Again")},null,8,P)])):d("",!0),!t.retake&&t.solution.length>0?(i(),l("div",X,"Retake exam score will not be recorded")):d("",!0)])):d("",!0),t.retake?(i(),l("div",U,[n("div",Z,[n("h1",$,"Retake Exam - "+g(this.$route.params.id),1),q]),n("div",ee,[(i(!0),l(k,null,v(t.solution,(e,h)=>(i(),l("div",{key:h,class:m(["p-5 mx-auto my-3 text-lg text-gray-900 border border-gray-300 rounded-md shadow-lg bg-gray-50 kalpurush",{"stop-events":t.solution[h].selected}])},[n("div",te,[n("span",se,"Marks: "+g(e.marks||1),1)]),n("div",{innerHTML:e.question},null,8,oe),n("div",ne,[e.a?(i(),l("div",{key:0,innerHTML:e.a,onClick:_=>t.solution[h].selected=e.a,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.a==e.selected?"border-2 border-green-500 bg-green-300  ":" bg-gray-200 "}`)},null,10,re)):d("",!0),e.b?(i(),l("div",{key:1,innerHTML:e.b,onClick:_=>t.solution[h].selected=e.b,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.b==e.selected?"border-2 border-green-500 bg-green-300  ":" bg-gray-200 "}`)},null,10,ie)):d("",!0),e.c?(i(),l("div",{key:2,innerHTML:e.c,onClick:_=>t.solution[h].selected=e.c,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.c==e.selected?"border-2 border-green-500 bg-green-300  ":" bg-gray-200 "}`)},null,10,le)):d("",!0),e.d?(i(),l("div",{key:3,innerHTML:e.d,onClick:_=>t.solution[h].selected=e.d,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.d==e.selected?"border-2 border-green-500 bg-green-300  ":" bg-gray-200 "}`)},null,10,ae)):d("",!0)])],2))),128)),n("div",de,[n("button",{onClick:s[2]||(s[2]=(...e)=>a.retakeResult&&a.retakeResult(...e)),class:"px-4 py-3 mx-auto font-semibold text-white rounded shadow outline-none hover:shadow-lg bg-gradient-to-t from-green-500 to-green-400"},"Submit")])])])):d("",!0),t.questions.length>0?(i(),l("div",ce,[n("div",ue,[n("h1",he,"Exam - "+g(this.$route.params.id),1),me]),n("div",ge,[(i(!0),l(k,null,v(t.questions,(e,h)=>(i(),l("div",{key:h,class:m(["p-5 mx-auto my-3 text-lg border border-gray-300 rounded-md shadow-lg bg-gray-50 kalpurush",{"stop-events":t.questions[h].selected}])},[n("div",_e,[n("span",be,"Marks: "+g(e.marks||1),1)]),n("div",{class:"mb-2 text-lg font-semibold text-gray-900",innerHTML:e.question},null,8,ye),n("div",pe,[e.a?(i(),l("div",{key:0,innerHTML:e.a,onClick:_=>t.questions[h].selected=e.a,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.a==e.selected?"border-2 border-green-500 bg-green-300  ":" bg-gray-200 "}`)},null,10,xe)):d("",!0),e.b?(i(),l("div",{key:1,innerHTML:e.b,onClick:_=>t.questions[h].selected=e.b,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.b==e.selected?"border-2 border-green-500 bg-green-300  ":" bg-gray-200 "}`)},null,10,fe)):d("",!0),e.c?(i(),l("div",{key:2,innerHTML:e.c,onClick:_=>t.questions[h].selected=e.c,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.c==e.selected?"border-2 border-green-500 bg-green-300  ":" bg-gray-200 "}`)},null,10,ke)):d("",!0),e.d?(i(),l("div",{key:3,innerHTML:e.d,onClick:_=>t.questions[h].selected=e.d,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.d==e.selected?"border-2 border-green-500 bg-green-300  ":" bg-gray-200 "}`)},null,10,ve)):d("",!0)])],2))),128)),n("div",we,[n("button",{onClick:s[3]||(s[3]=(...e)=>a.submitAns&&a.submitAns(...e)),disabled:t.eload,class:m(["btn btn-primary",{loading:t.eload}])},g(t.eload?"Loading...":"Submit"),11,Ce)])])])):d("",!0),t.show?(i(),l("div",Te,[n("div",Me,g(t.minute)+" : "+g(t.second),1)])):d("",!0)]))}var Ae=j(B,[["render",De],["__scopeId","data-v-8abbe37a"]]);export{Ae as default};
